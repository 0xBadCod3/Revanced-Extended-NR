name: Patch Revanced Extended
on:
  workflow_dispatch:
  workflow_call:
jobs:
  patch:
    name: Patch Revanced Extended
    permissions: write-all
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4.1.1
      - name: Preparing to patch
        uses: ./.github/actions/preparing
      - name: Patch apk
        run: bash src/build/Revanced-Extended.sh
        env:
          repository: ${{ github.repository }}
      - name: Releasing APK files
        uses: ./.github/actions/release